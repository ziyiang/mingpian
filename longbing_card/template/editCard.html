{template 'common/header'}

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">
            编辑名片
        </h3>
    </div>
    <div class="panel-body">

        <form class="layui-form" action="" onsubmit="return false">

            <div class="layui-form-item">
                <label class="layui-form-label">员工姓名</label>
                <div class="layui-input-block">
                    <input type="text" name="name" required  lay-verify="required" placeholder="请输入员工姓名" autocomplete="off" class="layui-input" value="{$info['name']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">头像</label>
                <div class="layui-input-block">
                    {php echo tpl_form_field_image('avatar', $info['avatar']);}
                    <div class="alert alert-success" role="alert">图片建议尺寸: 750 * 750</div>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">请选择职位</label>
                <div class="layui-input-block">
                    <select name="job_id" lay-verify="required">
                        <option value="">请点击选择</option>
                        {loop $jobs $index $item}
                        {if $item['id'] == $info['job_id']}
                        <option value="{$item['id']}" selected>{$item['name']}</option>
                        {else}
                        <option value="{$item['id']}">{$item['name']}</option>
                        {/if}
                        {/loop}
                    </select>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">所属公司</label>
                <div class="layui-input-block">
                    <select name="company_id" lay-verify="required">
                        <option value='0'>请点击选择</option>
                        {loop $company $index $item}
                        {if $item['id'] == $info['company_id']}
                        <option value="{$item['id']}" selected>{$item['name']}</option>
                        {else}
                        <option value="{$item['id']}">{$item['name']}</option>
                        {/if}
                        {/loop}
                    </select>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">手机号</label>
                <div class="layui-input-block">
                    <input type="text" name="phone" required  lay-verify="required" placeholder="请输入手机号" autocomplete="off" class="layui-input" value="{$info['phone']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">微信号</label>
                <div class="layui-input-block">
                    <input type="text" name="wechat" required  lay-verify="required" placeholder="请输入微信号" autocomplete="off" class="layui-input" value="{$info['wechat']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">电话</label>
                <div class="layui-input-block">
                    <input type="text" name="telephone" placeholder="请输入电话" autocomplete="off" class="layui-input" value="{$info['telephone']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">邮箱</label>
                <div class="layui-input-block">
                    <input type="email" name="email" required  lay-verify="required" placeholder="请输入邮箱" autocomplete="off" class="layui-input" value="{$info['email']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">语音介绍</label>
                <div class="layui-input-block">
                    {php echo tpl_form_field_audio('voice', $info['voice']);}
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">语音时长(秒)</label>
                <div class="layui-input-block">
                    <input type="text" name="voice_time" required  lay-verify="required" placeholder="请输入语音时长" autocomplete="off" class="layui-input" value="{$info['voice_time']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">个性签名</label>
                <div class="layui-input-block">
                    <textarea name="desc" placeholder="请输入个性签名" class="layui-textarea"> {$info['desc']}</textarea>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">详情图片</label>
                <div class="layui-input-block">
                    {php echo tpl_form_field_multi_image('images', $info['images']);}
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">视频</label>
                <div class="layui-input-block">
                    {php echo tpl_form_field_video('my_video', $info['my_video']);}
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">我的链接</label>
                <div class="layui-input-block">
                    <input type="text" name="my_url" placeholder="请输入链接" autocomplete="off" class="layui-input" value="{$info['my_url']}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">排序值(倒序: 值越大, 排名越靠前)</label>
                <div class="layui-input-block">
                    <input type="text" name="top" required placeholder="请输入排序值" autocomplete="off" class="layui-input" value="{$info['top']}">
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    <button  class="layui-btn layui-btn-primary" onclick="javascript: history.back()">返回</button>
                </div>
            </div>

        </form>
    </div>
</div>

{template 'common/footer'}
<link rel="stylesheet" href="../../../addons/longbing_card/images/layui/css/layui.css">
<link rel="stylesheet" href="../../../addons/longbing_card/images/css/main.css">

<script src="../../../addons/longbing_card/images/layui/layui.js"></script>
<script src="../../../addons/longbing_card/images/js/main.js"></script>

<script>
    $(function () {
        layui.use(['layer', 'form'], function () {
            var layer = layui.layer
                , form = layui.form

            form.on('submit(formDemo)', function(data){
                var formData = data.field;

                if (formData.avatar == '') {
                    layer.msg('请选择头像');
                    return false;
                }
                if (formData.images == '') {
                    layer.msg('请上传详情图片');
                    return false;
                }

                var url = "{php echo $this->createWebUrl('editCard')}";

                var data = {
                    action: 'editCard',
                    id: '{$id}',
                    formData: formData
                };

                postData(url, data);

                return false;
            });
        });
    })
</script>